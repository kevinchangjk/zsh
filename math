#! /bin/zsh 

alias gh="$VIM $HOME/files/gnuplots/documentation"
function gnp() {
    [ -f settings.gp ] || (echo "no settings.gp file" && return 1) &&
    gnuplot -e "filename='$1'; load 'settings.gp'" $1
}
function h() {
	$VIM -S ~/.config/nvim/sessions/m
}
function h2() {
    cd $REPOS/n3
    [ "$1" ] && if [ -z "${1//[0-9]}" ]; then
        open=()
        for i in $@:
            if [[ $i = *":" ]]; then
                open+=("pages/ch${i%%:*}.mdx")
            else
                open+=("pages/ch$i.mdx")
            fi
        $VIM $open
        return
    fi
    case $1 in
        'c') # css
            $VIM -S $HOME/.config/nvim/sessions/h2_c;;
        's')
            $VIM $REPOS/n3/public/style.css;;
        'a')
            $VIM $REPOS/n3/pages/_app.js;;
        'd')
            $VIM $REPOS/n3/pages/_document.js;;
        'i')
            $VIM $REPOS/n3/pages/index.mdx;;
        'm')
            $VIM $REPOS/n3/public/mathjax-config.js;;
        'v')
            $VIM -S ~/.config/nvim/sessions/math;;
        'pr')
            npx prettier --write -- pages components;;
        'p')
            cd $REPOS/n3/pages;;
        'g')
            cd $REPOS/n3/plots;;
        'n')
            cd $REPOS/n3/node_modules/nextra-theme-docs;;
        'r')
            cd $REPOS/n3 && yarn dev;;
        '.')
            $VIM $REPOS/zsh/math -c "/function h2";;
        '');;
        *)
            echo "nothing happened.";;
    esac
}
alias debug="$VIM -S ~/.config/nvim/sessions/debug"

# old tikz to svg functions
function ttikz() {
    time (tikz $1)
}
function tikz() {
    x=$1
    if [[ $x =~ ^[0-9]\.[0-9]*$ ]]; then
        x=$(find . -name $x*)
        x=${${x:2}%.*}
        echo working on $x ...
        cat packages.tex > output.tex
        cat $x.tex >> output.tex
        ./tikz2svg/tikz2svg output.tex > ../exports/$x.svg
        rm output.tex
        python3 update_dir.py
    elif [[ $x == *"tex" ]]; then
        x=${x%.*}
        echo working on $x ...
        cat packages.tex > output.tex
        cat $x.tex >> output.tex
        ./tikz2svg/tikz2svg output.tex > ../exports/$x.svg
        rm output.tex
        python3 update_dir.py
    fi
}
